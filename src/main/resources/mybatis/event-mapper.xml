<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="Event"> 

	<insert id="add">
		insert into drawing values(draw_seq.nextval,#{d_title},#{painter},#{d_file},#{email},'N')
		<selectKey order="AFTER" keyProperty="draw_seq" resultType="int">
			select draw_seq.currval from dual
		</selectKey>	
	</insert>
	
	<insert id="picadd">
		insert into drawing_pic values(drawpic_seq.nextval, #{sys_Name}, #{draw_seq})	
	</insert>
	
	<select id="isEmailExist" resultType="boolean">
		select count(*) from drawing_pic where email = #{email}
	</select>
	
	<insert id="testsave">
		insert into testclob values(#{imgDataUrl},#{d_title},#{painter})
	</insert>
	
	
	
	
	
	<resultMap id="listMap" type="java.util.HashMap">
      <result property="d_file" column="d_file" javaType="[B" jdbcType="BLOB"/>
	</resultMap>
	
	<select id="selectImage" resultMap="listMap" parameterType="java.util.HashMap">
	   select d_file from drawing
	</select>
	
	
</mapper>
	