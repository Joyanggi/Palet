<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="Shop">

  	<select id="selectGoods" resultType="Trillion.Palet.DTO.GoodsDTO">
<!--   		select goods.g_name, g_price, goods.g_num, gp_sysname from goods  -->
<!-- 		left outer join goodspic on goods.g_num = goodspic.g_num -->
<!-- 		where goods.e_num = #{e_num} -->
		
		select * from 
		(select row_number() over(order by ${option}) line, goods.g_name, g_price, goods.g_num, gp_sysname 
		from goods left outer join goodspic on goods.g_num = goodspic.g_num 
		where goods.e_num = #{e_num} ) where line between #{limit} and #{limit}+9
<!-- 		<trim prefix="order by"> -->
<!-- 			<if test="option == 'sell'">sales_count desc</if> -->
<!-- 			<if test="option == 'lowPrice'">g_price</if> -->
<!-- 			<if test="option == 'highPrice'">g_price desc</if> -->
<!-- 		</trim> -->
  	</select>  	
  	
  	<select id="selectMemberData" resultType="Trillion.Palet.DTO.MemberDataDTO">
  		select member.email, member.grade, member.point, coupon.category, coupon.serial, coupon.dc, coupon.used from member left outer join coupon on member.email = coupon.email where member.email=#{value}
  	</select>
  </mapper>	